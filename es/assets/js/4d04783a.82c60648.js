"use strict";(globalThis.webpackChunkrac_delta_docs=globalThis.webpackChunkrac_delta_docs||[]).push([[6998],{7838:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>i,default:()=>a,frontMatter:()=>o,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"reference/NodeJS/services/reconstruction-service","title":"ReconstructionService","description":"Servicio encargado de reconstruir archivos desde chunks usando cualquier ChunkSource.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/reference/NodeJS/services/reconstruction-service.md","sourceDirName":"reference/NodeJS/services","slug":"/reference/NodeJS/services/reconstruction-service","permalink":"/rac-delta-docs/es/reference/NodeJS/services/reconstruction-service","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"ReconstructionService","description":"Servicio encargado de reconstruir archivos desde chunks usando cualquier ChunkSource.","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"DeltaService","permalink":"/rac-delta-docs/es/reference/NodeJS/services/delta-service"},"next":{"title":"Chunk Sources","permalink":"/rac-delta-docs/es/category/chunk-sources"}}');var s=n(4848),d=n(8453);const o={title:"ReconstructionService",description:"Servicio encargado de reconstruir archivos desde chunks usando cualquier ChunkSource.",sidebar_position:4},i="ReconstructionService",t={},l=[{value:"M\xe9todos",id:"m\xe9todos",level:2},{value:"ReconstructionOptions",id:"reconstructionoptions",level:2},{value:"Detalles de m\xe9todos",id:"detalles-de-m\xe9todos",level:2},{value:"<code>reconstructFile(entry, outputPath, chunkSource, options?)</code>",id:"reconstructfileentry-outputpath-chunksource-options",level:3},{value:"<code>reconstructAll(plan, outputDir, chunkSource, options?)</code>",id:"reconstructallplan-outputdir-chunksource-options",level:3},{value:"<code>reconstructToStream(entry, chunkSource)</code>",id:"reconstructtostreamentry-chunksource",level:3},{value:"Relacionado",id:"relacionado",level:2}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"reconstructionservice",children:"ReconstructionService"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"ReconstructionService"})," define la interfaz principal responsable de ",(0,s.jsx)(r.strong,{children:"reconstruir archivos desde sus chunks"}),", ya sea a disco o stream.\nEste servicio se comunica directamente con un ",(0,s.jsx)(r.a,{href:"../chunk-sources/chunk-source",children:(0,s.jsx)(r.code,{children:"ChunkSource"})})," para obtener los datos necesarios y reconstruir el archivo."]}),"\n",(0,s.jsx)(r.p,{children:"Sirve como el componente principal del proceso de restauraci\xf3n en rac-delta."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"m\xe9todos",children:"M\xe9todos"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"M\xe9todo"}),(0,s.jsx)(r.th,{children:"Devuelve"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"reconstructFile(entry, outputPath, chunkSource, options?)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Promise<void>"})}),(0,s.jsx)(r.td,{children:"Reconstruye un \xfanico archivo en disco."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"reconstructAll(plan, outputDir, chunkSource, options?)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Promise<void>"})}),(0,s.jsx)(r.td,{children:"Reconstruye todos los archivos de un DeltaPlan en disco."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"reconstructToStream(entry, chunkSource)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Promise<Readable>"})}),(0,s.jsx)(r.td,{children:"Reconstruye un archivo en memoria y lo devuelve como Readable stream."})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"reconstructionoptions",children:"ReconstructionOptions"}),"\n",(0,s.jsx)(r.p,{children:"Opciones para el proceso de reconstrucci\xf3n:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"export interface ReconstructionOptions {\n  forceRebuild?: boolean;\n  verifyAfterRebuild?: boolean;\n  inPlaceReconstructionThreshold?: number;\n  fileConcurrency?: number;\n  onProgress?: (\n    reconstructProgress: number,\n    diskSpeed: number,\n    networkProgress?: number,\n    networkSpeed?: number\n  ) => void;\n}\n"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Par\xe1metro"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"forceRebuild"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"boolean"})}),(0,s.jsx)(r.td,{children:"Forzar la reconstrucci\xf3n incluso si el hash del archivo coincide."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"verifyAfterRebuild"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"boolean"})}),(0,s.jsx)(r.td,{children:"Verifica el hash del archivo reconstruido tras terminar. Si el hash no coincide, se lanza un error."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"inPlaceReconstructionThreshold"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"number"})}),(0,s.jsxs)(r.td,{children:["Tama\xf1o de archivo m\xednimo (en bytes) necesarios para realizar una ",(0,s.jsx)(r.strong,{children:"reconstrucci\xf3n in-place"})," en lugar de usar un archivo temporal."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"fileConcurrency"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"number"})}),(0,s.jsx)(r.td,{children:"Cu\xe1ntos archivos se reconstruir\xe1n de forma concurrente (valor por defecto es 5)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"onProgress"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"boolean"})}),(0,s.jsx)(r.td,{children:"Callback que devuelve el uso de disco y la velocidad de red opcional (solo para chunk sources de almacenamiento v\xeda streaming descarga-reconstrucci\xf3n)"})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"detalles-de-m\xe9todos",children:"Detalles de m\xe9todos"}),"\n",(0,s.jsx)(r.h3,{id:"reconstructfileentry-outputpath-chunksource-options",children:(0,s.jsx)(r.code,{children:"reconstructFile(entry, outputPath, chunkSource, options?)"})}),"\n",(0,s.jsxs)(r.p,{children:["Reconstruye un solo archivo desde un ",(0,s.jsx)(r.code,{children:"FileEntry"})," en disco."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"entry"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"FileEntry"})}),(0,s.jsxs)(r.td,{children:["El ",(0,s.jsx)(r.code,{children:"FileEntry"})," que contiene la lista de chunks y la ruta del archivo."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"outputPath"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"La ruta donde el archivo ser\xe1 reconstruido."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chunkSource"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ChunkSource"})}),(0,s.jsx)(r.td,{children:"La implementaci\xf3n de chunk source desde donde se recolectar\xe1n los chunks."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"options?"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ReconstructionOptions"})}),(0,s.jsx)(r.td,{children:"Opciones para la reconstrucci\xf3n."})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Devuelve:"})," ",(0,s.jsx)(r.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"reconstructallplan-outputdir-chunksource-options",children:(0,s.jsx)(r.code,{children:"reconstructAll(plan, outputDir, chunkSource, options?)"})}),"\n",(0,s.jsx)(r.p,{children:"Reconstruye todos los archivos del DeltaPlan dado en disco."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"plan"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"DeltaPlan"})}),(0,s.jsxs)(r.td,{children:["El ",(0,s.jsx)(r.code,{children:"DeltaPlan"})," que contiene los archivos a reconstruir."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"outputDir"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"La ruta donde los archivos ser\xe1n reconstruidos."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chunkSource"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ChunkSource"})}),(0,s.jsx)(r.td,{children:"La implementaci\xf3n de chunk source desde donde se recolectar\xe1n los chunks."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"options?"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ReconstructionOptions"})}),(0,s.jsx)(r.td,{children:"Opciones para la reconstrucci\xf3n."})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Devuelve:"})," ",(0,s.jsx)(r.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"reconstructtostreamentry-chunksource",children:(0,s.jsx)(r.code,{children:"reconstructToStream(entry, chunkSource)"})}),"\n",(0,s.jsx)(r.p,{children:"Reconstruye un archivo en memoria y lo devuelve como un Readable stream."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Nombre"}),(0,s.jsx)(r.th,{children:"Tipo"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"entry"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"FileEntry"})}),(0,s.jsxs)(r.td,{children:["El ",(0,s.jsx)(r.code,{children:"FileEntry"})," que contiene la lista de chunks y la ruta del archivo."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"chunkSource"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ChunkSource"})}),(0,s.jsx)(r.td,{children:"La implementaci\xf3n de chunk source desde donde se recolectar\xe1n los chunks."})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Devuelve:"})," ",(0,s.jsx)(r.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"relacionado",children:"Relacionado"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/reference/NodeJS/models/delta-plan",children:"DeltaPlan"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/reference/NodeJS/models/file-entry",children:"FileEntry"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/reference/NodeJS/chunk-sources/chunk-source",children:"ChunkSource"})}),"\n"]})]})}function a(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>i});var c=n(6540);const s={},d=c.createContext(s);function o(e){const r=c.useContext(d);return c.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),c.createElement(d.Provider,{value:r},e.children)}}}]);