"use strict";(globalThis.webpackChunkrac_delta_docs=globalThis.webpackChunkrac_delta_docs||[]).push([[8290],{5376:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"reference/Rust/services/validation-service","title":"ValidationService","description":"Service for validating files and RDIndex objects.","source":"@site/docs/reference/Rust/services/validation-service.md","sourceDirName":"reference/Rust/services","slug":"/reference/Rust/services/validation-service","permalink":"/rac-delta-docs/reference/Rust/services/validation-service","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"ValidationService","description":"Service for validating files and RDIndex objects.","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"HasherService","permalink":"/rac-delta-docs/reference/Rust/services/hasher-service"},"next":{"title":"DeltaService","permalink":"/rac-delta-docs/reference/Rust/services/delta-service"}}');var s=r(4848),d=r(8453);const t={title:"ValidationService",description:"Service for validating files and RDIndex objects.",sidebar_position:2},l="ValidationService",c={},a=[{value:"Methods",id:"methods",level:2},{value:"ValidationError",id:"validationerror",level:2},{value:"Method Details",id:"method-details",level:2},{value:"<code>validate_file(entry, path)</code>",id:"validate_fileentry-path",level:3},{value:"<code>validate_index(index, base_path)</code>",id:"validate_indexindex-base_path",level:3},{value:"Related",id:"related",level:2}];function h(e){const i={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"validationservice",children:"ValidationService"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"ValidationService"})," validates files and RDIndex objects.",(0,s.jsx)(i.br,{}),"\n","Internally, it uses ",(0,s.jsx)(i.code,{children:"HasherService"})," to verify file and chunk hashes."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-rust",children:"pub trait ValidationService: Send + Sync {\n  ...\n}\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Method"}),(0,s.jsx)(i.th,{children:"Returns"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"validate_file(entry, path)"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"Result<bool, ValidationError>"})}),(0,s.jsxs)(i.td,{children:["Validates a single file against its ",(0,s.jsx)(i.code,{children:"FileEntry"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"validate_index(index, base_path)"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"Result<bool, ValidationError>"})}),(0,s.jsxs)(i.td,{children:["Validates all files described in an ",(0,s.jsx)(i.code,{children:"RDIndex"}),"."]})]})]})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"validationerror",children:"ValidationError"}),"\n",(0,s.jsxs)(i.p,{children:["Custom error enum for results of ValidationService. (Uses ",(0,s.jsx)(i.code,{children:"thiserror"}),")"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-rust",children:'pub enum ValidationError {\n    #[error("IO error: {0}")]\n    Io(#[from] std::io::Error),\n\n    #[error("Hash verification failed")]\n    HashMismatch,\n}\n'})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"method-details",children:"Method Details"}),"\n",(0,s.jsx)(i.h3,{id:"validate_fileentry-path",children:(0,s.jsx)(i.code,{children:"validate_file(entry, path)"})}),"\n",(0,s.jsx)(i.p,{children:"Verifies a file."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Name"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"entry"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"&FileEntry"})}),(0,s.jsx)(i.td,{children:"Metadata of the file to validate"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"path"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"&str"})}),(0,s.jsx)(i.td,{children:"Path to the file on disk"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Returns:"})," ",(0,s.jsx)(i.code,{children:"Result<bool, ValidationError>"})," \u2013 ",(0,s.jsx)(i.code,{children:"true"})," if the file is valid."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Notes:"})," Uses ",(0,s.jsx)(i.code,{children:"HasherService"})," internally to verify the hash of the file and its chunks."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"validate_indexindex-base_path",children:(0,s.jsx)(i.code,{children:"validate_index(index, base_path)"})}),"\n",(0,s.jsx)(i.p,{children:"Verifies every file within a rd-index.json."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Name"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"index"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"&RDIndex"})}),(0,s.jsx)(i.td,{children:"RDIndex object describing files to validate"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"base_path"})}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"&str"})}),(0,s.jsx)(i.td,{children:"Directory containing the files"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Returns:"})," ",(0,s.jsx)(i.code,{children:"Result<bool, ValidationError>"})," \u2013 ",(0,s.jsx)(i.code,{children:"true"})," if all files are valid."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Notes:"})," Internally calls ",(0,s.jsx)(i.code,{children:"validateFile"})," for each file using ",(0,s.jsx)(i.code,{children:"HasherService"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"related",children:"Related"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/reference/Rust/models/rdindex",children:"RDIndex"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/reference/Rust/models/file-entry",children:"FileEntry"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/reference/Rust/services/hasher-service",children:"HasherService"})}),"\n"]})]})}function o(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,i,r)=>{r.d(i,{R:()=>t,x:()=>l});var n=r(6540);const s={},d=n.createContext(s);function t(e){const i=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),n.createElement(d.Provider,{value:i},e.children)}}}]);