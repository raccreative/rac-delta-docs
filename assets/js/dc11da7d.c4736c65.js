"use strict";(globalThis.webpackChunkrac_delta_docs=globalThis.webpackChunkrac_delta_docs||[]).push([[3154],{5326:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"core/configuration","title":"Configuration","description":"In order to achieve a proper working rac-delta implementation, configuration properties are important.","source":"@site/docs/core/configuration.md","sourceDirName":"core","slug":"/core/configuration","permalink":"/rac-delta-docs/core/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Interfaces","permalink":"/rac-delta-docs/core/interfaces"},"next":{"title":"Storage Adapter","permalink":"/rac-delta-docs/core/storage-adapter"}}');var t=r(4848),i=r(8453);const s={sidebar_position:3},o="Configuration",c={},l=[{value:"Base Configuration",id:"base-configuration",level:2},{value:"Storage Configuration",id:"storage-configuration",level:2},{value:"Local Storage",id:"local-storage",level:3},{value:"SSH Storage",id:"ssh-storage",level:2},{value:"URL Storage",id:"url-storage",level:2},{value:"HTTP Storage",id:"http-storage",level:2},{value:"Google Cloud Storage",id:"google-cloud-storage",level:2},{value:"Azure Blob Storage",id:"azure-blob-storage",level:2},{value:"S3 Storage",id:"s3-storage",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,t.jsx)(n.p,{children:"In order to achieve a proper working rac-delta implementation, configuration properties are important."}),"\n",(0,t.jsx)(n.p,{children:"Configuration will be used for the creation of the rac-delta client, the storage communication, and services optional configuration. This will make the SDK easier to use and more customizable."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"NOTE"}),": Interfaces here are written in TS, but easy to migrate to another language."]}),"\n",(0,t.jsx)(n.h2,{id:"base-configuration",children:"Base Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Minimal base configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface RacDeltaConfig {\n  chunkSize: number;\n  maxConcurrency?: number;\n  storage: StorageConfig;\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"chunkSize"})," will be the value used in all operations of rac-delta for the chunks, it is important to maintain consistency with this value, any changes between operations will lead to errors."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"maxConcurrency"})," is only used as a recommended max concurrency limit for operations like reading, writting or uploading. For better performance."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"storage"}),": Concrete configuration for your storage, see below."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"storage-configuration",children:"Storage Configuration"}),"\n",(0,t.jsx)(n.p,{children:"It is not mandatory to implement all storages, but it is recommended as our philosophy for rac-delta is storage agnosticism, so being prepared for every kind of storage is always recommended."}),"\n",(0,t.jsx)(n.p,{children:"Here are our configuration interfaces for storage."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface BaseStorageConfig {\n  pathPrefix?: string;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The base configuration that all storages will extend. It includes a ",(0,t.jsx)(n.code,{children:"pathPrefix"})," if your desired directory is within a subfolder."]}),"\n",(0,t.jsx)(n.h3,{id:"local-storage",children:"Local Storage"}),"\n",(0,t.jsx)(n.p,{children:"Perfect for testing or to have local storage, but not recommended for real life cases."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface LocalStorageConfig extends BaseStorageConfig {\n  type: 'local';\n  basePath: string;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ssh-storage",children:"SSH Storage"}),"\n",(0,t.jsx)(n.p,{children:"Perfect for same network storage and private storage."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface SSHStorageConfig extends BaseStorageConfig {\n  type: 'ssh';\n  host: string;\n  port?: number;\n  credentials: {\n    username: string,\n    password?: string,\n    privateKey?: string,\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"url-storage",children:"URL Storage"}),"\n",(0,t.jsx)(n.p,{children:"Perfect for signed URLS."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface URLStorageConfig extends BaseStorageConfig {\n  type: 'url';\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This storage type does not need any configuration, but needs its own StorageAdapter type and its own Pipeline type, as method names are different from normal storages.\nExample: ",(0,t.jsx)(n.code,{children:"uploadChunksByUrl()"})]}),"\n",(0,t.jsx)(n.p,{children:"How to call URLs is up to the user, you can use any library or native methods to make HTTP calls."}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/core/pipelines",children:"pipelines"})," and ",(0,t.jsx)(n.a,{href:"/core/storage-adapter",children:"adapters"})]}),"\n",(0,t.jsx)(n.h2,{id:"http-storage",children:"HTTP Storage"}),"\n",(0,t.jsx)(n.p,{children:"Perfect for custom APIs, this type takes for granted that you have an API connected to your storage with endpoints like /chunks/[hash] or GET /rd-index"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface HTTPStorageConfig extends BaseStorageConfig {\n  type: 'http';\n  endpoint: string;\n  indexFilePath?: string;\n  credentials?: {\n    bearerToken?: string,\n    apiKey?: string,\n  };\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"endpoint"}),": Base URL used for all chunk operations. Each chunk will be accessed as: ",(0,t.jsx)(n.code,{children:"{endpoint}/{pathPrefix?}/{chunk-hash}"})]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'endpoint: "https://ducks.com/api"\npathPrefix: "uploads"\n\n=> https://ducks.com/api/uploads/{chunk-hash}\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"indexFilePath"}),": Optional path (relative to ",(0,t.jsx)(n.code,{children:"endpoint"})," and ",(0,t.jsx)(n.code,{children:"pathPrefix"}),") where the remote index file (",(0,t.jsx)(n.code,{children:"rd-index.json"}),") can be found."]}),"\n",(0,t.jsx)(n.p,{children:"If omitted, the adapter will automatically look for:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{endpoint}/{pathPrefix?}/rd-index.json\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'indexFilePath: "index"\n=> https://ducks.com/api/index\nindexFilePath: "metadata/rd-index.json"\n=> https://ducks.com/api/metadata/rd-index.json\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"credentials"}),": Optional credentials used for authenticated HTTP requests. Supports both Bearer tokens and API keys. Adapter must include these headers."]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'credentials: {\n  bearerToken: "eyJhbGciOiJIUzI1...",\n  apiKey: "my-secret-key"\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"google-cloud-storage",children:"Google Cloud Storage"}),"\n",(0,t.jsx)(n.p,{children:"Configuration for GCS support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface GCSStorageConfig extends BaseStorageConfig {\n  type: 'gcs';\n  bucket: string;\n  apiEndpoint?: string;\n  credentials: {\n    projectId: string,\n    clientEmail?: string,\n    privateKey?: string,\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"azure-blob-storage",children:"Azure Blob Storage"}),"\n",(0,t.jsx)(n.p,{children:"Configuration for Azure Blob support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface AzureBlobStorageConfig extends BaseStorageConfig {\n  type: 'azure';\n  container: string;\n  endpoint: string;\n  credentials: {\n    accountName?: string,\n    accountKey?: string,\n    sasToken?: string,\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"s3-storage",children:"S3 Storage"}),"\n",(0,t.jsx)(n.p,{children:"Configuration for S3 support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"interface S3StorageConfig extends BaseStorageConfig {\n  type: 's3';\n  endpoint?: string;\n  region?: string;\n  bucket: string;\n  credentials: {\n    accessKeyId: string,\n    secretAccessKey: string,\n    sessionToken?: string,\n    expiration?: Date,\n  };\n}\n"})})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var a=r(6540);const t={},i=a.createContext(t);function s(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);